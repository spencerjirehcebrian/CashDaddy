{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 14:53:06"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 14:53:06"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 14:53:06"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 14:53:06"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 14:53:06"}
{"level":"info","message":"KYC microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"0","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getKycStatus\",\"payload\":{\"userId\":\"66c94fc25cb63642498b643d\"}}"}
{"level":"warn","message":"Unknown action received: getKycStatus","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"1","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getKycStatus\",\"payload\":{\"userId\":\"66c94fc25cb63642498b643d\"}}"}
{"level":"warn","message":"Unknown action received: getKycStatus","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"2","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getOwnKYC\",\"payload\":{\"userId\":\"66c94fc25cb63642498b643d\"}}"}
{"level":"warn","message":"getOwnKYC action received without userId","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"3","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getOwnKYC\",\"payload\":{\"userId\":\"66c9fa17ac811a0ff3729b30\"}}"}
{"level":"warn","message":"getOwnKYC action received without userId","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"4","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getOwnKYC\",\"payload\":{\"userId\":\"66c9fa17ac811a0ff3729b30\"}}"}
{"level":"warn","message":"getOwnKYC action received without userId","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"5","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getOwnKYC\",\"payload\":{\"userId\":\"66c9fa17ac811a0ff3729b30\"}}"}
{"level":"warn","message":"getOwnKYC action received without userId","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Received message:","offset":"6","partition":0,"service":"shared","timestamp":"2024-08-25 14:53:09","topic":"kyc-events","value":"{\"action\":\"getOwnKYC\",\"payload\":{\"userId\":\"66c9fa17ac811a0ff3729b30\"}}"}
{"level":"warn","message":"getOwnKYC action received without userId","service":"shared","timestamp":"2024-08-25 14:53:09"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 15:18:34"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 15:18:34"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 15:18:34"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 15:18:34"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 15:18:34"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 15:18:57"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 15:18:57"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 15:18:57"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 15:18:57"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 15:18:57"}
{"level":"info","message":"KYC microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 15:19:07"}
{"level":"error","message":"Error: Token has expired\n    at AuthService.verifyToken (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/services/auth/auth.service.js:20:23)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:28:50\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at /home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:175:3)","service":"shared","timestamp":"2024-08-25 15:20:54"}
{"level":"info","message":"Response: 401 An error occurred","service":"shared","timestamp":"2024-08-25 15:20:54"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 15:26:07"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 15:26:07"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 15:26:07"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 15:26:07"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 15:26:07"}
{"level":"info","message":"KYC microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 15:26:10"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 15:36:53"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 15:36:53"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 15:36:53"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 15:36:53"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 15:36:53"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 15:36:56"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 15:48:08"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 15:48:08"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 15:48:08"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 15:48:08"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 15:48:08"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 15:48:11"}
{"level":"error","message":"Error: Token has expired\n    at AuthService.verifyToken (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/services/auth/auth.service.js:20:23)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:28:50\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at /home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:175:3)","service":"shared","timestamp":"2024-08-25 15:48:22"}
{"level":"info","message":"Response: 401 An error occurred","service":"shared","timestamp":"2024-08-25 15:48:22"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 15:48:59"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 15:48:59"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 15:49:55"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 15:49:55"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 15:50:10"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 15:50:10"}
{"level":"error","message":"SyntaxError: Unexpected token '}', ...\"alance\":\r\n}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at parse (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/body-parser/lib/types/json.js:92:19)\n    at /home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/raw-body/index.js:238:16)\n    at done (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:520:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","service":"shared","timestamp":"2024-08-25 15:50:15"}
{"level":"info","message":"Response: 503 Server error","service":"shared","timestamp":"2024-08-25 15:50:15"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 16:07:03"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 16:07:03"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 16:07:03"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 16:07:03"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 16:07:03"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 16:07:06"}
{"level":"error","message":"SyntaxError: Unexpected token '}', ...\"alance\":\r\n}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at parse (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/body-parser/lib/types/json.js:92:19)\n    at /home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/raw-body/index.js:238:16)\n    at done (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:520:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","service":"shared","timestamp":"2024-08-25 16:07:24"}
{"level":"info","message":"Response: 503 Server error","service":"shared","timestamp":"2024-08-25 16:07:24"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 16:07:38"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:07:38"}
{"level":"error","message":"Error in createWallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:07:43"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:07:43"}
{"level":"error","message":"Error: Failed to create wallet: User already has a wallet\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:11:28)","service":"shared","timestamp":"2024-08-25 16:07:43"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:07:43"}
{"level":"info","message":"Cacheable decorator: caching method getBalance with key wallet:66c9fa17ac811a0ff3729b30","service":"shared","timestamp":"2024-08-25 16:08:22"}
{"level":"info","message":"Attempting to cache method with key: wallet:66c9fa17ac811a0ff3729b30","service":"shared","timestamp":"2024-08-25 16:08:22"}
{"level":"info","message":"Cache miss: wallet:66c9fa17ac811a0ff3729b30. Executing method and caching result.","service":"shared","timestamp":"2024-08-25 16:08:22"}
{"level":"info","message":"Method result cached with key: wallet:66c9fa17ac811a0ff3729b30","service":"shared","timestamp":"2024-08-25 16:08:22"}
{"level":"info","message":"Response: 200 Balance retrieved successfully","service":"shared","timestamp":"2024-08-25 16:08:22"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 16:12:12"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:12:12"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 16:12:26"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:12:26"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 16:13:54"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 16:13:54"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 16:13:54"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 16:13:54"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 16:13:54"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 16:14:16"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 16:14:17"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:14:17"}
{"level":"info","message":"Simulated payment intent for test payment method: {\"id\":\"pi_simulated_9da4eba8215538bf1033b596992c41c2\",\"status\":\"succeeded\",\"amount\":100000}","service":"shared","timestamp":"2024-08-25 16:14:30"}
{"_message":"KnowYourCustomer validation failed","errors":{"stripeCustomerId":{"kind":"required","message":"Path `stripeCustomerId` is required.","name":"ValidatorError","path":"stripeCustomerId","properties":{"message":"Path `stripeCustomerId` is required.","path":"stripeCustomerId","type":"required"}}},"level":"error","message":"Error in deposit:","service":"shared","timestamp":"2024-08-25 16:14:30"}
{"level":"info","message":"Response: 400 Deposit failed: KnowYourCustomer validation failed: stripeCustomerId: Path `stripeCustomerId` is required.","service":"shared","timestamp":"2024-08-25 16:14:30"}
{"level":"error","message":"Error: Validation failed\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/validation.middleware.js:7:19\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:61:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"shared","timestamp":"2024-08-25 16:14:38"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:14:38"}
{"level":"error","message":"Error in withdraw:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:14:41"}
{"level":"error","message":"Error withdrawing funds:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:14:41"}
{"level":"error","message":"Error: Withdrawal failed: Insufficient funds\n    at WalletService.withdraw (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:144:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.withdraw (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:51:28)","service":"shared","timestamp":"2024-08-25 16:14:41"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:14:41"}
{"level":"error","message":"Error in transfer:","service":"shared","statusCode":404,"timestamp":"2024-08-25 16:18:56"}
{"level":"error","message":"Error transferring funds:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:18:56"}
{"level":"error","message":"Error: Transfer failed: One or both wallets not found\n    at WalletService.transfer (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:173:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.transfer (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:39:28)","service":"shared","timestamp":"2024-08-25 16:18:56"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:18:56"}
{"level":"info","message":"Cacheable decorator: caching method getTransactionHistory with key wallet:66c9fa17ac811a0ff3729b30","service":"shared","timestamp":"2024-08-25 16:19:33"}
{"level":"info","message":"Attempting to cache method with key: wallet:66c9fa17ac811a0ff3729b30","service":"shared","timestamp":"2024-08-25 16:19:33"}
{"level":"info","message":"Cache hit: wallet:66c9fa17ac811a0ff3729b30","service":"shared","timestamp":"2024-08-25 16:19:33"}
{"level":"info","message":"Response: 200 Transaction history retrieved successfully","service":"shared","timestamp":"2024-08-25 16:19:33"}
{"level":"error","message":"Error in createWallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:32:11"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:32:11"}
{"level":"error","message":"Error: Failed to create wallet: User already has a wallet\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:11:28)","service":"shared","timestamp":"2024-08-25 16:32:11"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:32:11"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 16:53:55"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 16:53:55"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 16:53:55"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 16:53:55"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 16:53:55"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 16:53:58"}
{"level":"error","message":"Error: Token has expired\n    at AuthService.verifyToken (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/services/auth/auth.service.js:20:23)\n    at file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/@cash-daddy/shared/dist/middlewares/auth.middleware.js:28:50\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/layer.js:95:5)\n    at /home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/jireh/projects/stratpoint/CashDaddy/wallet-service/node_modules/express/lib/router/index.js:175:3)","service":"shared","timestamp":"2024-08-25 16:54:16"}
{"level":"info","message":"Response: 401 An error occurred","service":"shared","timestamp":"2024-08-25 16:54:16"}
{"level":"error","message":"Error in createWallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:54:21"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:54:21"}
{"level":"error","message":"Error: Failed to create wallet: User already has a wallet\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:11:28)","service":"shared","timestamp":"2024-08-25 16:54:21"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:54:21"}
{"level":"error","message":"Error in createWallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:55:22"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:55:22"}
{"level":"error","message":"Error: Failed to create wallet: User already has a wallet\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:11:28)","service":"shared","timestamp":"2024-08-25 16:55:22"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:55:22"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 16:57:51"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 16:57:51"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 16:57:51"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 16:57:51"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 16:57:51"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 16:58:13"}
{"level":"error","message":"Error in createWallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:58:33"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 16:58:33"}
{"level":"error","message":"Error: Failed to create wallet: User already has a wallet\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:10:28)","service":"shared","timestamp":"2024-08-25 16:58:33"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 16:58:33"}
{"level":"info","message":"Connected to MongoDB: mongodb://localhost:27017/cashdaddy_user_dev","service":"shared","timestamp":"2024-08-25 16:59:59"}
{"level":"info","message":"Connected to Redis: redis://localhost:6379","service":"shared","timestamp":"2024-08-25 16:59:59"}
{"level":"info","message":"Connected to Kafka: localhost:29092","service":"shared","timestamp":"2024-08-25 16:59:59"}
{"level":"info","message":"CacheManager initialized with CacheService.","service":"shared","timestamp":"2024-08-25 16:59:59"}
{"level":"info","message":"Connected Kafka Consumer","service":"shared","timestamp":"2024-08-25 16:59:59"}
{"level":"info","message":"Wallet microservice listening on port 3002","service":"shared","timestamp":"2024-08-25 17:00:18"}
{"level":"error","message":"Error creating Stripe customer","service":"shared","statusCode":404,"timestamp":"2024-08-25 17:01:02"}
{"level":"error","message":"Error creating Stripe customer: User cannot be verified","service":"shared","timestamp":"2024-08-25 17:01:02"}
{"level":"error","message":"Error in createWallet:","service":"shared","timestamp":"2024-08-25 17:01:02"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 17:01:02"}
{"level":"error","message":"Error: Failed to create wallet: Failed to create Stripe customer: User cannot be verified\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at process.processTimers (node:internal/timers:511:9)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:10:28)","service":"shared","timestamp":"2024-08-25 17:01:02"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 17:01:02"}
{"level":"error","message":"Error creating Stripe customer","service":"shared","statusCode":404,"timestamp":"2024-08-25 17:02:46"}
{"level":"error","message":"Error creating Stripe customer: User cannot be verified","service":"shared","timestamp":"2024-08-25 17:02:46"}
{"level":"error","message":"Error in createWallet:","service":"shared","timestamp":"2024-08-25 17:02:46"}
{"level":"error","message":"Error creating wallet:","service":"shared","statusCode":400,"timestamp":"2024-08-25 17:02:46"}
{"level":"error","message":"Error: Failed to create wallet: Failed to create Stripe customer: User cannot be verified\n    at WalletService.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/services/db/wallet.service.js:58:23)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at process.processTimers (node:internal/timers:511:9)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async descriptor.value (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/decorators/caching.decorator.js:31:28)\n    at async WalletController.createWallet (file:///home/jireh/projects/stratpoint/CashDaddy/wallet-service/dist/src/controller/wallet.controller.js:10:28)","service":"shared","timestamp":"2024-08-25 17:02:46"}
{"level":"info","message":"Response: 400 An error occurred","service":"shared","timestamp":"2024-08-25 17:02:46"}
